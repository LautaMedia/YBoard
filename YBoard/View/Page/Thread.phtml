<?php include($viewFilesPath . '/Snippets/BoardHeader.phtml') ?>
<?php include($viewFilesPath . '/Snippets/BoardNavigation.phtml') ?>

<div class="content-box thread" id="thread-<?= $thread->id ?>" data-id="<?= $thread->id ?>">
    <h3>
        <?php if ($thread->sticky) : ?>
            <span class="icon pushpin">S</span>
        <?php endif ?>
        <?php if ($thread->locked) : ?>
            <span class="icon lock">L</span>
        <?php endif ?>
        <?= htmlspecialchars($thread->subject) ?>
    </h3>
    <div class="thread-content">
        <div class="op-post" id="post-<?= $thread->id ?>">
            <?php $post = $thread; include($viewFilesPath . '/Snippets/Post.phtml') ?>
        </div>

        <div class="thread-meta">
            <?= $thread->statistics->replyCount ?> vastausta, luettu <?= $thread->statistics->readCount ?> kertaa
        </div>
        <div class="replies">
        <?php foreach($thread->replies as $reply) : ?>
            <div class="reply" id="post-<?= $reply->id ?>">
                <?php $post = $reply; include($viewFilesPath . '/Snippets/Post.phtml') ?>
            </div>
        <?php endforeach ?>
        </div>
        <div class="thread-buttons">
            <?php if (!$thread->locked) : ?>
            <a class="add-reply toggle-postform" href="javascript:void(showPostForm())"><?= _('reply to thread') ?></a>
            <?php endif ?>
        </div>
    </div>
</div>

<?php include($viewFilesPath . '/Snippets/PostForm.phtml') ?>

<?php include($viewFilesPath . '/Snippets/BoardNavigation.phtml') ?>
