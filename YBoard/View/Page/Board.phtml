<?php include($viewFilesPath . '/Snippets/BoardHeader.phtml') ?>
<?php include($viewFilesPath . '/Snippets/BoardNavigation.phtml') ?>

<?php include($viewFilesPath . '/Snippets/PostForm.phtml') ?>

<?php if (!empty($threads)) : ?>
    <?php foreach($threads as $thread) : ?>
    <div class="content-box thread" id="thread-<?= $thread->id ?>" data-id="<?= $thread->id ?>">
        <?php include($viewFilesPath . '/Snippets/ThreadSubject.phtml') ?>
        <div class="thread-content">
            <div class="op-post" id="post-<?= $thread->id ?>">
                <?php $post = $thread; include($viewFilesPath . '/Snippets/Post.phtml') ?>
            </div>

            <?php include($viewFilesPath . '/Snippets/ThreadMeta.phtml') ?>
            <?php if (!empty($thread->replies)) : ?>
            <div class="replies">
                <div class="replies-buttons">
                    <?php if ($thread->statistics->replyCount > $previewPosts) : ?>
                    <a class="more-replies" href="javascript:void(getMoreReplies(<?= $thread->id ?>))"><?= _('show more replies') ?></a>
                    <a class="less-replies" href="javascript:void(getMoreReplies(<?= $thread->id ?>))"><?= _('show less replies') ?></a>
                    <?php endif ?>
                </div>
                <div class="more-replies-container"></div>
                <?php foreach($thread->replies as $reply) : ?>
                    <div class="reply" id="post-<?= $reply->id ?>">
                        <?php $post = $reply; include($viewFilesPath . '/Snippets/Post.phtml') ?>
                    </div>
                <?php endforeach ?>
            </div>
            <?php endif ?>
            <div class="thread-buttons">
                <!--<a href="/<?= $board->url ?>/<?= $thread->id ?>">avaa lanka</a>-->
                <?php if (!$thread->locked) : ?>
                <a class="add-reply" href="javascript:void(replyToThread(<?= $thread->id ?>))"><?= _('reply') ?></a>
                <?php endif ?>
            </div>
        </div>
    </div>
    <?php endforeach; unset($thread); ?>
<?php else : ?>
    <div class="content-box">
        <h3><?= _('There are no threads here...') ?></h3>
    </div>
<?php endif ?>

<?php include($viewFilesPath . '/Snippets/BoardNavigation.phtml') ?>
