<div class="post-buttons">
    <?php if (!$thread->locked || $user->isMod) : ?>
    <button class="button square icon-bubbles" onclick="replyToPost(<?= $post->id ?>)" title="<?= _('Reply') ?>"></button>
    <?php endif ?>
    <!--
    <a href="#"><?= _('Donate gold') ?></a>
    -->
    <?php if ($board->url == 'hiddenthreads') : ?>
        <?php if (!$post->threadId) : ?>
            <button class="button square icon-plus" onclick="restoreThread(<?= $post->id ?>)" title="<?= _('Restore') ?>"></button>
        <?php endif ?>
    <?php else : ?>
        <?php if (!$post->threadId) : ?>
        <button class="button square icon-minus" onclick="hideThread(<?= $post->id ?>)" title="<?= _('Hide') ?>"></button>
        <?php endif ?>
    <?php endif ?>
    <?php if ($post->userId != $user->id) : ?>
    <button class="button square icon-flag2" onclick="" title="<?= _('Report') ?>"></button>
    <?php endif ?>
    <?php if ($post->userId == $user->id || $user->isMod) : ?>
    <button class="button square icon-trash2" onclick="deletePost(<?= $post->id ?>)" title="<?= _('Delete') ?>"></button>
    <?php endif ?>
</div>

<div class="post-meta">
    <div class="user-info">
        <span class="username"><?= htmlspecialchars($post->username) ?></span>
        <?php if ($post->userId == $thread->userId) : ?>
            <span class="text-tag op"><?= _('OP') ?></span>
        <?php endif ?>
    </div>
    <div class="post-info">
        <span class="post-time datetime"><?= $post->time ?></span>
        <a href="/<?= $thread->boardUrl ?>/<?= $thread->id ?>#post-<?= $post->id ?>"
            onclick="<?php if (!$thread->locked || $user->isMod) : ?>replyToPost(<?= $post->id ?>);<?php endif ?>return false"
            class="post-id"><?= _('No.') ?> <?= $post->id ?></a>
    </div>
</div>

<blockquote class="post">
    <?php if (!empty($post->file)) : ?>
    <?php $fileUrl = $staticUrl . '/files/' . $post->file->folder . '/o/' . $post->file->name . '/' . rawurlencode($post->file->displayName) . '.' . $post->file->extension; ?>
    <figure class="post-file thumbnail">
        <a href="<?= $fileUrl ?>" onclick="expandImage(this, event)">
            <img src="<?= $staticUrl ?>/files/<?= $post->file->folder ?>/t/<?= $post->file->name ?>.jpg" alt="">
        </a>
        <figcaption>
            <a href="<?= $fileUrl ?>" target="_blank"><?= htmlspecialchars($post->file->displayName) ?></a>
            <span>
                <?= $post->file->width ?>&times;<?= $post->file->height ?>
                <?= \YBoard\Library\Text::formatBytes($post->file->size) ?>
                <?= htmlspecialchars(strtoupper($post->file->extension)) ?>
            </span>
        </figcaption>
    </figure>
    <?php endif ?>
    <?= $post->messageFormatted ?>
</blockquote>

<?php if ($post->postReplies) : ?>
<div class="post-replies">
    <span><?= _('Replies') ?>:</span>
    <?php foreach ($post->postReplies as $postReply) : ?>
        <a href="/scripts/posts/redirect/<?= $postReply ?>" data-id="<?= $postReply ?>" class="reflink">&gt;&gt;<?= $postReply ?></a>
    <?php endforeach ?>
</div>
<?php endif ?>
