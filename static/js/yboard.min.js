!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(){o(this,t),this.ajaxOptions={method:"GET",url:"",data:null,timeout:0,loadFunction:null,timeoutFunction:null,errorFunction:null,loadendFunction:null,cache:!1,contentType:null,xhr:null},this.ajaxHeaders={"X-Requested-With":"XMLHttpRequest"}}return t.prototype.on=function(t,e,n){return document.addEventListener(t,function(t){e&&!t.target.matches(e)||n(t)}),this},t.prototype.ajaxSetup=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ajaxOptions=Object.assign(this.ajaxOptions,t),this.ajaxHeaders=Object.assign(this.ajaxHeaders,e)},t.prototype.get=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=Object.assign({url:t},e),n=Object.assign({},this.ajaxHeaders,n),this.ajax(e,n)},t.prototype.post=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n=Object.assign({method:"POST",url:t,data:e},n),o=Object.assign({},this.ajaxHeaders,o),this.ajax(n,o)},t.prototype.ajax=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(t=Object.assign({},this.ajaxOptions,t)).cache||(e=Object.assign(e,{"Cache-Control":"no-cache, max-age=0"}));var n=new XMLHttpRequest;n.timeout=t.timeout,n.open(t.method,t.url);for(var o in e)e.hasOwnProperty(o)&&n.setRequestHeader(o,e[o]);if(this.onEnd=function(t){return n.addEventListener("loadend",function(){t(n)}),this},"function"==typeof t.loadendFunction&&this.onEnd(t.loadendFunction),this.onLoad=function(t){return n.addEventListener("load",function(){200===n.status&&t(n)}),this},"function"==typeof t.loadFunction&&this.onLoad(t.loadFunction),this.onTimeout=function(t){return n.addEventListener("timeout",function(){t(n)}),this},"function"==typeof t.timeoutFunction&&this.onTimeout(t.timeoutFunction),this.onError=function(t){return n.addEventListener("loadend",function(){200!==n.status&&0!==n.status&&t(n)}),this},"function"==typeof t.errorFunction&&this.onError(t.errorFunction),this.getXhrObject=function(){return n},"function"==typeof t.xhr&&(n=t.xhr(n)),"function"!=typeof t.data.append){var i=new FormData;Object.keys(t.data).forEach(function(e){return i.append(e,t.data[e])}),t.data=i}return n.send(t.data),this},t.prototype.benchmark=function(t,e){void 0===e&&(e=1e5);for(var n=e,o=new Date;e--;)t();var i=new Date-o,s=i/n,r=(1e3/s).toFixed(2);return i+" ms, "+s.toFixed(2)+" ms per op, "+r+" ops/sec"},t}();e.default=new i},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=o(n(0)),a=o(n(8)),l=o(n(2)),c=o(n(4)),u=o(n(14)),d=o(n(9)),p=o(n(15)),f=o(n(11)),h=o(n(12)),m=o(n(10)),g=function(){function t(){i(this,t);var e=this;new d.default,this.Theme=new u.default,this.Thread=new p.default,this.Post=new f.default,this.PostForm=new h.default,this.Notifications=new m.default,this.messagePreviewCache={},this.isBadBrowser()&&this.browserWarning(),document.addEventListener("keydown",function(t){(!t.ctrlKey&&!t.shiftKey&&116===t.which||t.ctrlKey&&!t.shiftKey&&82===t.which)&&(t.preventDefault(),e.pageReload()),t.ctrlKey&&13===t.which&&e.PostForm.submit(t)}),r.default.on("submit","form.ajax",function(t){e.submitForm(t)});var n=document.getElementById("login");null!==n&&(n.querySelector(".e-signup").addEventListener("click",function(t){e.signup(t,!0)}),document.getElementById("signup").querySelector(".cancel").addEventListener("click",function(t){e.signup(t,!1)})),document.getElementById("scroll-to-top").addEventListener("click",function(){window.scrollTo(0,0)}),document.getElementById("scroll-to-bottom").addEventListener("click",function(){window.scrollTo(0,document.body.scrollHeight)}),document.getElementById("reload-page").addEventListener("click",function(){e.pageReload()}),this.initElement(document)}return t.prototype.initElement=function(t){var e=this;t.querySelectorAll(".datetime").forEach(this.localizeDatetime),t.querySelectorAll(".number").forEach(this.localizeNumber),t.querySelectorAll(".currency").forEach(this.localizeCurrency);var n=t.querySelectorAll(".tip, .ref");this.PostForm.bindPostEvents(t),this.Post.bindEvents(t),n.forEach(function(t){e.addTooltipEventListener(t,e)})},t.prototype.addTooltipEventListener=function(t,e){function n(t){function n(n){function o(o){if(null!==n.elm){e.initElement(n.elm),n.setContent(o.responseText),n.elm.style.willChange="";var s=t.target.closest(".post");if(null!==s){var r=n.elm.querySelector('.message .ref[data-id="'+s.dataset.id+'"]');null!==r&&r.classList.add("referring")}e.messagePreviewCache[i]=n.getContent()}}function a(t){if(0!==t.responseText.length){var e=JSON.parse(t.responseText);n.setContent(e.message)}else n.setContent(messages.errorOccurred)}if(void 0!==e.messagePreviewCache[i])return void n.setContent(e.messagePreviewCache[i]);n.elm.style.willChange="contents",s=r.default.post("/api/post/get",{postId:i},{errorFunction:null}).onLoad(o).onError(a),s=s.getXhrObject()}function o(){null!==s&&4!==s.readyState&&s.abort()}var i=null;void 0!==t.target.dataset.id&&(i=t.target.dataset.id);var s=null;new a.default(t,{openDelay:void 0===e.messagePreviewCache[i]?50:0,position:"bottom",content:e.spinnerHtml(),onOpen:n,onClose:o})}t.addEventListener("mouseover",n)},t.prototype.localizeDatetime=function(t){t.innerHTML=new Date(t.innerHTML.replace(" ","T")+"Z").toLocaleString()},t.prototype.localizeNumber=function(t){t.innerHTML=parseFloat(t.innerHTML).toLocaleString(void 0,{minimumFractionDigits:0})},t.prototype.localizeCurrency=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"eur";0===e&&(e="eur"),t.innerHTML=parseFloat(t.innerHTML).toLocaleString(void 0,{style:"currency",currency:e})},t.prototype.getSelectionText=function(){var t="";return window.getSelection?t=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(t=document.selection.createRange().text),t.trim()},t.prototype.isBadBrowser=function(){return"function"!=typeof FormData||"object"!==("undefined"==typeof localStorage?"undefined":s(localStorage))},t.prototype.browserWarning=function(){var t=document.createElement("div");t.classList.add("old-browser-warning"),t.innerHTML="<p>"+messages.oldBrowserWarning+"</p>",document.body.appendChild(t)},t.prototype.pageReload=function(){window.location=window.location.href.split("#")[0]},t.prototype.returnToBoard=function(){var t=window.location.href;t=t.substr(0,t.lastIndexOf("/")+1),window.location=t},t.prototype.spinnerHtml=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""!==t&&(t+=" "),'<span class="'+t+'loading icon-loading spin"></span>'},t.prototype.submitForm=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==t&&(t.preventDefault(),e=t.target),!1===n&&void 0!==e.captcha)return void e.captcha.execute();if(!1===e)return!1;if(void 0===e.dataset.action)return!1;var o=new FormData(e);!1!==n&&o.append("captchaResponse",n);var i=document.createElement("div");i.classList.add("form-overlay"),i.innerHTML="<div>"+this.spinnerHtml()+"</div></div>",e.appendChild(i),r.default.post(e.dataset.action,o).onLoad(function(t){var n=JSON.parse(t.responseText);n.reload?n.url?window.location=n.url:window.location.reload():(i.remove(),l.default.success(n.message),e.reset())}).onError(function(){i.remove()}).onEnd(function(){void 0!==e.captcha&&e.captcha.reset()})},t.prototype.signup=function(t,e){var n=this;t.preventDefault();var o=document.getElementById("login"),i=document.getElementById("signup");e?(i.show("flex"),o.hide(),i.captcha=new c.default(i.querySelector(".captcha"),{size:"invisible",callback:function(t){n.submitForm(null,i,t)}})):(i.hide(),o.show("flex"))},t}();e.default=new g},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this.options=Object.assign({displayTime:3e3,fadeTime:2e3},e)}return t.prototype.success=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._show("success",t,e,n)},t.prototype.info=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._show("info",t,e,n)},t.prototype.warning=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._show("warning",t,e,n)},t.prototype.error=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._show("error",t,e,n)},t.prototype._show=function(t,e,n,o){var i=this;o=Object.assign({},this.options,o);var s=document.getElementById("toast-root");null===s&&((s=document.createElement("div")).id="toast-root",document.body.appendChild(s));var r=document.createElement("div");r.classList.add("toast",t);var a=document.createElement("div");if(a.classList.add("toast-content"),r.appendChild(a),!1!==n){var l=document.createElement("h3");l.innerHTML=n,a.appendChild(l)}var c=document.createElement("p");c.innerHTML=e,a.appendChild(c),s.appendChild(r),r.addEventListener("click",function(t){t.currentTarget.removeToast()}),r.removeToast=function(){r.remove(),null===s.querySelector(".toast")&&s.remove()},r.startFade=function(){r.classList.add("fading"),r.style.transitionDuration=i.options.fadeTime/1e3+"s"};var u=void 0,d=void 0;u=setTimeout(r.startFade,o.displayTime),d=setTimeout(r.removeToast,o.displayTime+o.fadeTime),r.addEventListener("mouseover",function(t){clearTimeout(u),clearTimeout(d),t.currentTarget.classList.remove("fading"),t.currentTarget.style.transitionDuration=""}),r.addEventListener("mouseout",function(t){u=setTimeout(r.startFade,o.displayTime),d=setTimeout(r.removeToast,o.displayTime+o.fadeTime)})},t}();e.default=new i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(){function e(t){27===t.keyCode&&i.closeLatest()}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var i=this;void 0===window.modals&&(window.modals=[]);var s={};return s.options=Object.assign({content:null,title:null,onOpen:null,onClose:null},n),this.modalRoot=document.getElementById("modal-root"),null===this.modalRoot&&(this.modalRoot=document.createElement("div"),this.modalRoot.id="modal-root",this.modalRoot.addEventListener("click",function(t){t.currentTarget===t.target&&i.closeLatest()}),document.addEventListener("keydown",e),document.body.classList.add("modal-open"),document.body.appendChild(this.modalRoot)),s.close=function(){"function"==typeof s.options.onClose&&s.options.onClose(this),s.elm.remove(),null===i.modalRoot.querySelector(".modal")&&(document.removeEventListener("keydown",e),i.modalRoot.remove(),document.body.classList.remove("modal-open"))},s.setTitle=function(t){s.options.title=t,s.titleTextElm.innerHTML=t},s.setContent=function(t){s.content.innerHTML=t},s.elm=document.createElement("div"),s.elm.classList.add("modal"),this.modalRoot.appendChild(s.elm),s.closeButton=document.createElement("button"),s.closeButton.classList.add("close","icon-cross"),s.closeButton.addEventListener("click",s.close),null!==s.options.title?(s.titleElm=document.createElement("div"),s.titleElm.classList.add("title"),s.elm.appendChild(s.titleElm),s.titleTextElm=document.createElement("span"),s.titleTextElm.innerHTML=s.options.title,s.titleElm.appendChild(s.titleTextElm),s.titleElm.appendChild(s.closeButton)):s.elm.appendChild(s.closeButton),s.content=document.createElement("div"),s.content.classList.add("content"),s.content.innerHTML=s.options.content,s.elm.appendChild(s.content),"function"==typeof s.options.onOpen&&s.options.onOpen(s),window.modals.push(s),s}return t.prototype.closeLatest=function(){var t=window.modals.pop();void 0!==t&&t.close()},t}();e.default=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),"undefined"!=typeof grecaptcha&&e&&0===e.innerHTML.length&&(n=Object.assign({sitekey:config.reCaptchaPublicKey},n),this.widgetId=grecaptcha.render(e,n))}return t.isEnabled=function(){return"undefined"!=typeof grecaptcha},t.prototype.execute=function(){return"undefined"!=typeof grecaptcha&&(grecaptcha.execute(this.widgetId),!0)},t.prototype.reset=function(){return"undefined"!=typeof grecaptcha&&(grecaptcha.reset(this.widgetId),!0)},t}();e.default=i},function(t,e,n){"use strict";"function"!=typeof Element.prototype.remove&&(Element.prototype.remove=function(){this.parentElement.removeChild(this)}),"function"!=typeof NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"function"!=typeof Element.prototype.matches&&(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=this,n=(e.document||e.ownerDocument).querySelectorAll(t),o=0;n[o]&&n[o]!==e;)++o;return Boolean(n[o])}),"function"!=typeof Element.prototype.closest&&(Element.prototype.closest=function(t){for(var e=this;e&&1===e.nodeType;){if(e.matches(t))return e;e=e.parentNode}return null})},function(t,e,n){"use strict";Element.prototype.setAttributes=function(t){for(var e in t){if(!t.hasOwnProperty(e))return!0;this.setAttribute(e,t[e])}},Element.prototype.appendBefore=function(t){t.parentNode.insertBefore(this,t)},Element.prototype.appendAfter=function(t){t.parentNode.insertBefore(this,t.nextSibling)},Element.prototype.toggle=function(){"none"!==window.getComputedStyle(this).display?this.hide():this.show()},Element.prototype.hide=function(){this.style.display="none"},Element.prototype.show=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block";this.style.display=t},Element.prototype.insertAtCaret=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(document.selection){var n=document.selection.createRange();n.text=t+n.text+e,this.focus()}else if(this.selectionStart||0===this.selectionStart){var o=this.value.substr(this.selectionStart,this.selectionEnd-this.selectionStart),i=this.selectionStart,s=this.selectionEnd;this.value=this.value.substr(0,i)+t+o+e+this.value.substr(s,this.value.length),this.selectionStart=i+t.length,this.selectionEnd=i+t.length,this.focus()}else this.value+=t+e,this.focus()},NodeList.prototype.toggle=function(){this.forEach(function(t){t.toggle()})},NodeList.prototype.hide=function(){this.forEach(function(t){t.hide()})},NodeList.prototype.show=function(){this.forEach(function(t){t.show()})},NodeList.prototype.remove=function(){this.forEach(function(t){t.remove()})}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}n(5),n(6);var i=o(n(0)),s=o(n(1)),r=o(n(2)),a=o(n(3));i.default.ajaxSetup({timeout:1e4,errorFunction:function(t){var e=t.responseText,n=messages.errorOccurred;if(0===t.responseText.length&&0===t.readyState&&0===t.status)e=messages.networkError;else if("timeout"===t.responseText)e=messages.timeoutWarning;else try{var o=JSON.parse(t.responseText);e=o.message,void 0!==o.title&&null!==o.title&&0!==o.title.length&&(n=o.title)}catch(n){e=t.responseText}410===t.status?r.default.warning(e):418===t.status?r.default.error(e):r.default.error(e,n)},timeoutFunction:function(t){r.default.error(messages.timeoutWarning)}},{"X-CSRF-Token":"undefined"!=typeof csrfToken?csrfToken:null}),window.YBoard=s.default,window.YQuery=i.default,window.Toast=r.default,window.Modal=a.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.options=Object.assign({openDelay:100,offset:10,content:"",onOpen:null,onClose:null,closeEvent:"mouseout",position:"bottom"},n),this.x=0,this.y=0,this.spaceAvailable={top:0,right:0,bottom:0,left:0},this.overflows=!1,this.event=e,this.id=0,this.open()}return t.prototype.open=function(){var t=this;this.elm=document.createElement("div"),this.elm.classList.add("tooltip"),null!==document.querySelector(".tooltip:last-of-type")&&(this.id=parseInt(document.querySelector(".tooltip:last-of-type").dataset.id)+1),this.elm.dataset.id=this.id,this.setContent(this.options.content);var e=function e(){t.event.target.removeEventListener(t.options.closeEvent,e),t.close(t)};this.event.target.addEventListener(this.options.closeEvent,e),this.event.target.tooltip=this,0!==this.options.openDelay?setTimeout(function(){null!==t.elm&&t.appendTip()},this.options.openDelay):this.appendTip()},t.prototype.appendTip=function(){document.body.appendChild(this.elm),"function"==typeof this.options.onOpen&&this.options.onOpen(this),this.position()},t.prototype.setContent=function(t){null!==this.elm&&(this.elm.innerHTML='<div class="tooltip-content">'+t+"</div>")},t.prototype.getContent=function(){if(null!==this.elm)return this.elm.querySelector(".tooltip-content").innerHTML},t.prototype.close=function(){"function"==typeof this.options.onClose&&this.options.onClose(this),this.elm=null;var t=document.querySelector('.tooltip[data-id="'+this.id+'"]');null!==t&&t.remove()},t.prototype.position=function(){null!==this.elm&&(this.targetRect=this.event.target.getBoundingClientRect(),this.tipRect=this.elm.getBoundingClientRect(),this.spaceAvailable={top:this.targetRect.top,right:window.innerWidth-this.targetRect.right,bottom:window.innerHeight-this.targetRect.bottom,left:this.targetRect.left},this.calculatePosition(this.options.position),this.elm.classList.add(this.options.position),this.setPosition())},t.prototype.calculatePosition=function(t){switch(this.options.position=t,t){case"top":case"bottom":this.x=this.targetRect.right-this.targetRect.width/2-this.tipRect.width/2,this.x+this.tipRect.width>window.innerWidth&&(this.x=window.innerWidth-this.tipRect.width),this.x<0&&(this.x=0);break;case"right":if(this.x=this.targetRect.right+this.options.offset,this.tipRect.width+this.options.offset>this.spaceAvailable.right){if(!(this.overflows||this.spaceAvailable.left<this.spaceAvailable.right))return this.recalculatePosition("left");this.elm.style.maxWidth=this.spaceAvailable.right-this.options.offset+"px",this.tipRect=this.elm.getBoundingClientRect()}break;case"left":if(this.x=this.targetRect.left-this.tipRect.width-this.options.offset,this.x<0){if(!(this.overflows||this.spaceAvailable.right<this.spaceAvailable.left))return this.recalculatePosition("right");this.elm.style.maxWidth=this.spaceAvailable.left-this.options.offset+"px",this.tipRect=this.elm.getBoundingClientRect()}}switch(t){case"top":if(this.y=this.targetRect.top-this.tipRect.height-this.options.offset,this.y<0){if(!(this.overflows||this.spaceAvailable.bottom<this.spaceAvailable.top))return this.recalculatePosition("bottom");this.y=0,this.elm.style.maxHeight=this.spaceAvailable.top-this.options.offset+"px",this.tipRect=this.elm.getBoundingClientRect()}break;case"bottom":if(this.y=this.targetRect.bottom+this.options.offset,this.tipRect.height+this.options.offset>this.spaceAvailable.bottom){if(!(this.overflows||this.spaceAvailable.top<this.spaceAvailable.bottom))return this.recalculatePosition("top");this.elm.style.maxHeight=this.spaceAvailable.bottom-this.options.offset+"px",this.tipRect=this.elm.getBoundingClientRect()}break;case"right":case"left":this.y=this.targetRect.bottom-this.targetRect.height/2-this.tipRect.height/2,this.y<0&&(this.y=0)}},t.prototype.recalculatePosition=function(t){this.overflows=!0,this.calculatePosition(t)},t.prototype.setPosition=function(){this.elm.style.left=window.scrollX+this.x+"px",this.elm.style.top=window.scrollY+this.y+"px"},t}();e.default=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(){o(this,t);var e=document.getElementById("search-catalog");e&&e.addEventListener("keyup",this.search)}return t.prototype.search=function(t){var e=t.target.value,n=document.querySelectorAll(".thread");0===e.length?n.forEach(function(t){t.style.display=""}):(n.hide(),n.forEach(function(t){return-1!==t.querySelector("h3").innerHTML.toLowerCase().indexOf(e.toLowerCase())?(t.show("flex"),!0):-1!==t.querySelector(".message").innerHTML.toLowerCase().indexOf(e.toLowerCase())?(t.show("flex"),!0):void 0}))},t}();e.default=i},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=o(n(3)),r=o(n(1)),a=o(n(0)),l=function(){function t(){i(this,t);var e=this;this.modal=null,document.querySelectorAll(".e-open-notifications").forEach(function(t){t.addEventListener("click",function(){e.open()})})}return t.prototype.open=function(){var t=this,e=null;this.modal=new s.default({title:messages.notifications,content:r.default.spinnerHtml(),onOpen:function(n){n.elm.style.willChange="contents",e=a.default.post("/api/user/notification/getall",{},{errorFunction:null}).onLoad(function(e){null!==n.elm&&(n.setContent(e.responseText),n.elm.style.willChange="",t.bindEvents(n.elm),t.updateUnreadCount(t.getUnreadCount(n.elm)))}).onError(function(t){if(0!==t.responseText.length){var e=JSON.parse(t.responseText);n.setContent(e.message)}else n.setContent(messages.errorOccurred)}),e=e.getXhrObject()},onClose:function(){null!==e&&4!==e.readyState&&e.abort()}})},t.prototype.bindEvents=function(t){var e=this;t.querySelectorAll("a").forEach(function(t){t.addEventListener("click",function(t){if(null!==e.modal&&(void 0!==t.target.tooltip&&t.target.tooltip.close(),e.modal.close()),t.target.closest(".notification").classList.contains("not-read")){var n="/api/user/notification/markread",o=new FormData;o.append("id",t.target.closest(".notification").dataset.id),o.append("csrfToken",csrfToken),"sendBeacon"in navigator?navigator.sendBeacon(n,o):(t.preventDefault(),a.default.post(n,o).onLoad(function(){window.location=t.target.getAttribute("href")}))}})}),t.querySelectorAll(".e-mark-all-read").forEach(function(t){t.addEventListener("click",function(t){e.markAllRead(t,e)})}),t.querySelectorAll(".e-mark-read").forEach(function(t){t.addEventListener("click",function(t){e.markRead(t,e)})}),r.default.initElement(t)},t.prototype.markRead=function(t,e){var n=t.target.closest(".notification");n.classList.remove("not-read"),n.classList.add("is-read"),a.default.post("/api/user/notification/markread",{id:n.dataset.id}).onError(function(){n.classList.add("not-read"),n.classList.remove("is-read")}),e.updateUnreadCount(e.getUnreadCount(t.target.closest(".notifications-list")))},t.prototype.markAllRead=function(t,e){t.target.closest(".modal").querySelectorAll(".notification.not-read").forEach(function(t){t.classList.remove("not-read"),t.classList.add("is-read")}),a.default.post("/api/user/notification/markallread"),e.updateUnreadCount(0),e.modal.close()},t.prototype.getUnreadCount=function(t){return t.querySelectorAll(".notification.not-read").length},t.prototype.updateUnreadCount=function(t){(t=parseInt(t))>=100&&(t=":D"),document.querySelectorAll(".unread-notifications").forEach(function(e){e.innerHTML=t,0===t?e.classList.add("none"):e.classList.remove("none")})},t}();e.default=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=o(n(0)),r=o(n(1)),a=o(n(2)),l=o(n(13)),c=function(){function t(){i(this,t),this.File=new l.default(this)}return t.prototype.bindEvents=function(t){var e=this;this.File.bindEvents(t),t.querySelectorAll(".e-post-delete").forEach(function(t){t.addEventListener("click",e.delete)}),t.querySelectorAll(".ref").forEach(function(t){t.addEventListener("click",e.refClick)})},t.prototype.refClick=function(t){var e=t.currentTarget.dataset.id;if(void 0===e)return!0;null!==document.getElementById("post-"+e)&&(t.preventDefault(),document.location.hash="#post-"+e)},t.prototype.getElm=function(t){return document.getElementById("post-"+t)},t.prototype.delete=function(t){if(!confirm(messages.confirmDeletePost))return!1;var e=t.target.closest(".post, .thread"),n=e.dataset.id;s.default.post("/api/post/delete",{postId:n}).onLoad(function(){e.remove(),null!==r.default.Thread.getElm(n)&&(document.body.classList.contains("thread-page")?r.default.returnToBoard():r.default.Thread.getElm(n).remove()),a.default.success(messages.postDeleted)})},t}();e.default=c},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=o(n(0)),a=o(n(1)),l=o(n(2)),c=o(n(4)),u=function(){function t(){i(this,t);var e=this;this.elm=document.getElementById("post-form"),null!==this.elm&&(this.captcha=null,this.locationParent=this.elm.parentNode,this.location=this.elm.nextElementSibling,this.msgElm=this.elm.querySelector("#post-message"),this.fileUploadInProgress=!1,this.fileUploadXhr=null,this.submitAfterFileUpload=!1,this.submitInProgress=!1,this.skipUnloadWarning=!1,this.origDestName=!1,this.origDestValue=!1,this.elm.querySelectorAll(".bb-code").forEach(function(t){t.addEventListener("click",function(t){e.insertBbCode(t.target.dataset.code)})}),this.elm.querySelector(".e-postform-color-bar").addEventListener("click",function(){e.toggleBbColorBar()}),document.querySelectorAll(".create-thread").forEach(function(t){t.addEventListener("click",function(){e.show()})}),document.querySelectorAll(".e-thread-reply").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();var n=null,o=t.target.closest(".thread");null!==o&&(n=o.dataset.id),e.threadReply(n)})}),this.elm.querySelector("#reset-button").addEventListener("click",function(t){(0===e.msgElm.value.length||confirm(messages.confirmPostCancel))&&(t.preventDefault(),e.reset(!0))}),this.elm.querySelector("#post-files").addEventListener("change",function(){e.uploadFile()}),this.elm.querySelector("#remove-file").addEventListener("click",function(){e.deleteUploadedFile(),e.removeFile()}),this.elm.querySelector(".toggle-options").addEventListener("click",function(t){t.preventDefault(),document.getElementById("post-options").toggle()}),this.elm.addEventListener("submit",function(t){e.submit(t)}),this.elm.querySelectorAll("input, select, textarea").forEach(function(t){t.addEventListener("focus",function(t){e.renderCaptcha()})}),window.addEventListener("beforeunload",function(t){e.skipUnloadWarning||null===e.msgElm||0===e.msgElm.value.length||(t.returnValue=messages.confirmPageLeave)}))}return t.prototype.bindPostEvents=function(t){var e=this;t.querySelectorAll(".e-post-reply").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),e.postReply(t.target.closest(".post").dataset.id),e.msgElm.focus()})})},t.prototype.show=function(t){t||this.reset(),this.renderCaptcha(),this.elm.classList.add("visible"),null!==this.msgElm.offsetParent&&this.msgElm.focus()},t.prototype.renderCaptcha=function(){var t=this;null===this.captcha&&c.default.isEnabled()&&(this.captcha=new c.default(this.elm.querySelector(".captcha"),{size:"invisible",callback:function(e){t.submit(null,e)}}))},t.prototype.hide=function(){this.elm.classList.remove("visible")},t.prototype.reset=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.elm.reset(),null!==this.location?this.locationParent.insertBefore(this.elm,this.location):this.locationParent.appendChild(this.elm),this.removeFile(),this.resetDestination(),this.hide()},t.prototype.focus=function(){this.msgElm.focus()},t.prototype.setDestination=function(t,e){this.saveDestination();var n="board";t&&(n="thread");var o=this.elm.querySelector("#post-destination");o.setAttribute("name",n),o.value=e},t.prototype.saveDestination=function(){var t=this.elm.querySelector("#post-destination"),e=this.elm.querySelector("#label-board");return null!==e?(e.hide(),e.querySelector("select").required=!1,!0):!!this.origDestName||(this.origDestName=t.getAttribute("name"),this.origDestValue=t.value,!0)},t.prototype.resetDestination=function(){var t=this.elm.querySelector("#post-destination"),e=this.elm.querySelector("#label-board");return null!==e&&(e.show("flex"),e.querySelector("select").required=!0),!this.origDestName||(t.setAttribute("name",this.origDestName),t.value=this.origDestValue,this.origDestName=!1,this.origDestValue=!1,!0)},t.prototype.insertBbCode=function(t){this.msgElm.insertAtCaret("["+t+"]","[/"+t+"]")},t.prototype.toggleBbColorBar=function(){this.elm.querySelector("#color-buttons").toggle(),this.msgElm.focus()},t.prototype.uploadFile=function(){this.elm.querySelector("#remove-file").show(),this.deleteUploadedFile(),this.removeFile(!0);var t=this.elm.querySelector("#post-files"),e=this.elm.querySelector("#file-name");e.value="",this.submitAfterFileUpload=!1,this.updateFileProgressBar(1);for(var n,o=t.dataset.maxsize,i=t.files,s=0,a=0;n=i[a];a++)s+=n.size;if(s>o)return l.default.warning(messages.maxSizeExceeded),this.updateFileProgressBar(0),!1;var c=new FormData;Array.from(i).forEach(function(t){c.append("files[]",t)}),this.fileUploadInProgress=!0;var u=t.value.split("\\").pop().split(".");u.pop(),e.value=u.join(".");var d=this,p=r.default.post("/api/file/create",c,{timeout:0,contentType:null,xhr:function(t){return t.upload?(t.upload.addEventListener("progress",function(t){if(t.lengthComputable){var e=Math.round(t.loaded/t.total*100);e<0?e=0:e>99&&(e=99),d.updateFileProgressBar(e)}}),t):t}}).onLoad(function(t){d.fileUploadInProgress=!1,d.updateFileProgressBar(100);var e=JSON.parse(t.responseText);0!==e.message.length?(d.elm.querySelector("#file-id").value=e.message[0],d.submitAfterFileUpload&&d.submit()):(l.default.error(messages.errorOccurred),d.removeFile(),d.updateFileProgressBar(0))}).onError(function(){d.removeFile(),d.updateFileProgressBar(0)});this.fileUploadXhr=p.getXhrObject()},t.prototype.removeFile=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null!==this.fileUploadXhr&&(this.fileUploadXhr.abort(),this.fileUploadXhr=null),t||(this.elm.querySelector("#remove-file").hide(),this.elm.querySelector("#post-files").value=""),this.elm.querySelector("#file-id").value="",this.elm.querySelector("#file-name").value="",this.updateFileProgressBar(0),this.elm.querySelector('input[type="submit"].button').disabled=!1,this.fileUploadInProgress=!1,this.submitAfterFileUpload=!1},t.prototype.deleteUploadedFile=function(){var t=this.elm.querySelector("#file-id");""!==t.value&&r.default.post("/api/file/delete",{fileId:t.value})},t.prototype.updateFileProgressBar=function(t){t<0?t=0:t>100&&(t=100);var e=this.elm.querySelector(".file-progress"),n=e.querySelector("div");0===t?(n.style.width=0,e.classList.remove("in-progress")):(n.style.width=t+"%",e.classList.add("in-progress"))},t.prototype.threadReply=function(t){null!==t&&(a.default.Thread.getElm(t).appendChild(this.elm),this.show(!0),this.setDestination(!0,t)),this.msgElm.focus()},t.prototype.postReply=function(t){var e=a.default.getSelectionText();a.default.Post.getElm(t).appendChild(this.elm),this.show(!0),this.setDestination(!0,this.elm.closest(".thread").dataset.id),this.msgElm.focus();var n="";"\n"!==this.msgElm.value.substr(-1)&&0!==this.msgElm.value.length&&("\n"!==this.msgElm.value.substr(-1)?n+="\n\n":n+="\n"),n+=">>"+t+"\n",""!==e&&(n+=">"+e.replace(/(\r\n|\n|\r)/g,"$1>")+"\n"),this.msgElm.insertAtCaret(n)},t.prototype.submit=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;if("object"===(void 0===t?"undefined":s(t))&&null!==t&&t.preventDefault(),null!==this.captcha&&null===e)return console.log(2),void this.captcha.execute();var o=this.elm.querySelector('input[type="submit"].button');if(this.fileUploadInProgress)return l.default.info(messages.waitingForFileUpload),o.disabled=!0,this.submitAfterFileUpload=!0,!1;if(this.submitInProgress)return!1;this.submitInProgress=!0,this.elm.querySelector("#post-files").value="";var i=new FormData(this.elm);i.append("captchaResponse",e),r.default.post("/api/post/create",i,{contentType:null}).onLoad(function(t){var e=document.getElementById("post-destination"),o=void 0;if(null!==(o="thread"!==e.getAttribute("name")?null:e.value))a.default.Thread.AutoUpdate.runOnce(o),n.reset(!0);else if(0===t.responseText.length)n.skipUnloadWarning=!0,a.default.pageReload();else{var s=JSON.parse(t.responseText);void 0===s.message?l.default.error(messages.errorOccurred):(n.skipUnloadWarning=!0,window.location="/"+i.get("board")+"/"+s.message)}}).onEnd(function(){o.disabled=!1,n.submitInProgress=!1,null!==n.captcha&&n.captcha.reset()})},t}();e.default=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=o(n(0)),r=o(n(1)),a=o(n(2)),l=function(){function t(e){i(this,t),this.Post=e}return t.prototype.bindEvents=function(t){var e=this;t.querySelectorAll(".thumbnail .image").forEach(function(t){t.addEventListener("click",function(t){e.expand(t,e)})}),t.querySelectorAll(".thumbnail .media").forEach(function(t){t.addEventListener("click",function(t){e.playMedia(t,e)})}),t.querySelectorAll(".e-stop-media").forEach(function(t){t.addEventListener("click",e.stopAllMedia)})},t.prototype.delete=function(t){if(!confirm(messages.confirmDeleteFile))return!1;s.default.post("/api/post/deletefile",{post_id:t,loadFunction:function(){this.getElm(t).find("figure").remove(),a.default.success(messages.fileDeleted)}})},t.prototype.expand=function(t,e){function n(t,e){function n(t){t.target.removeEventListener("load",o),delete t.target.dataset.expanding,clearTimeout(t.target.loading);var e=t.target.parentNode.querySelector("div.overlay");null!==e&&requestAnimationFrame(function(){e.remove()})}var o=n;t.dataset.expanding=!0,t.loading=setTimeout(function(){var e=document.createElement("div");e.classList.add("overlay","center"),e.innerHTML=r.default.spinnerHtml(),t.parentNode.appendChild(e)},200),t.addEventListener("load",o),t.setAttribute("src",e)}t.preventDefault(),void 0===t.target.dataset.expanded?(t.target.dataset.expanded=t.target.getAttribute("src"),requestAnimationFrame(function(){n(t.target,t.target.parentNode.getAttribute("href")),t.target.closest(".post-file").classList.remove("thumbnail"),e.Post.unTruncate(t.target.closest(".post").dataset.id)})):requestAnimationFrame(function(){n(t.target,t.target.dataset.expanded),t.target.closest(".post-file").classList.add("thumbnail"),delete t.target.dataset.expanded;var e=t.target.getBoundingClientRect().top+window.scrollY;e<window.scrollY&&window.scrollTo(0,e)})},t.prototype.playMedia=function(t,e){t.preventDefault(),e.stopAllMedia();var n=t.target.closest("figure").dataset.id;if(void 0!==t.target.dataset.loading)return!1;t.target.dataset.loading=!0;var o=setTimeout(function(){var e=document.createElement("div");e.classList.add("overlay","bottom","left"),e.innerHTML=r.default.spinnerHtml(),requestAnimationFrame(function(){t.target.appendChild(e)})},200);s.default.post("/api/file/getmediaplayer",{fileId:n}).onLoad(function(n){var o=t.target.closest(".post-file"),i=t.target.closest(".message");e.Post.unTruncate(t.target.closest(".post").dataset.id),null!==i.nextElementSibling&&i.nextElementSibling.classList.contains("e-untruncate")&&i.nextElementSibling.remove();var s=document.createElement("div");s.innerHTML=n.responseText,r.default.initElement(s),requestAnimationFrame(function(){o.classList.remove("thumbnail"),o.classList.add("media-player-container"),o.insertBefore(s,o.firstElementChild);var t=o.querySelector("video");if(null!==t){t.addEventListener("volumechange",function(t){localStorage.setItem("videoVolume",t.target.volume)});var e=localStorage.getItem("videoVolume");null!==e&&(t.volume=e)}})}).onEnd(function(){clearTimeout(o),t.target.querySelectorAll("div.overlay").forEach(function(t){requestAnimationFrame(function(){t.remove()})}),delete t.target.dataset.loading})},t.prototype.stopAllMedia=function(){document.querySelectorAll(".media-player-container").forEach(function(t){var e=t.querySelector("video");e.pause(),e.remove(),requestAnimationFrame(function(){t.classList.remove("media-player-container"),t.classList.add("thumbnail")})})},t}();e.default=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),s=function(){function t(){o(this,t);var e=this;document.querySelector(".e-switch-theme").addEventListener("click",function(){e.switchVariation()}),document.getElementById("sidebar").addEventListener("click",function(t){t.offsetX>document.getElementById("sidebar").clientWidth&&document.body.classList.toggle("sidebar-visible")}),document.querySelector("#e-sidebar-toggle").addEventListener("click",function(){document.body.classList.toggle("sidebar-visible")}),document.getElementById("e-sidebar-hide").addEventListener("click",function(){e.toggleSidebar()})}return t.prototype.toggleSidebar=function(){document.body.classList.toggle("no-sidebar");var t=document.body.classList.contains("no-sidebar");t&&document.body.classList.remove("sidebar-visible"),i.default.post("/api/user/preferences/set",{hideSidebar:t})},t.prototype.switchVariation=function(){var t=document.querySelectorAll("head .css"),e=(t=t[t.length-1]).dataset.light,n=t.dataset.dark,o=void 0,s=void 0;"true"===t.dataset.darktheme?(o=e,s=!1):(o=n,s=!0);var r=t.cloneNode();r.setAttributes({href:o,"data-darkTheme":s}),r.appendAfter(t);setTimeout(function(){t.remove()},5e3);i.default.post("/api/user/preferences/set",{darkTheme:s})},t}();e.default=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=o(n(0)),r=o(n(1)),a=o(n(16)),l=o(n(18)),c=o(n(17)),u=function(){function t(){i(this,t);var e=this;this.AutoUpdate=new a.default,this.Hide=new l.default,this.Follow=new c.default,document.querySelectorAll(".replies-buttons").forEach(function(t){t.querySelector(".e-more-replies").addEventListener("click",e.expand),t.querySelector(".e-less-replies").addEventListener("click",e.shrink)})}return t.prototype.getElm=function(t){return document.getElementById("thread-"+t)},t.prototype.toggleLock=function(t){0==this.getElm(t).find("h3 a .icon-lock").length?$.post("/scripts/threads/lock",{threadId:t}).done(function(){YB.thread.getElm(t).find("h3 a").prepend('<span class="icon-lock icon"></span>'),toastr.success(messages.threadLocked)}):$.post("/scripts/threads/unlock",{threadId:t}).done(function(){YB.thread.getElm(t).find("h3 a .icon-lock").remove(),toastr.success(messages.threadUnlocked)})},t.prototype.toggleSticky=function(t){0==this.getElm(t).find("h3 a .icon-lock").length?$.post("/scripts/threads/stick",{threadId:t}).done(function(){YB.thread.getElm(t).find("h3 a").prepend('<span class="icon-pushpin icon"></span>'),toastr.success(messages.threadStickied)}):$.post("/scripts/threads/unstick",{threadId:t}).done(function(){YB.thread.getElm(t).find("h3 a .icon-pushpin").remove(),toastr.success(messages.threadUnstickied)})},t.prototype.shrink=function(t){var e=t.target.closest(".thread");e.querySelector(".more-replies-container").innerHTML="",e.querySelector(".e-more-replies").show(),e.classList.remove("expanded")},t.prototype.expand=function(t){var e=t.target.closest(".thread"),n=e.dataset.id,o=e.querySelector(".reply");null!==o&&(o=o.dataset.id);s.default.post("/api/thread/getreplies",{threadId:n,fromId:o,count:100}).onLoad(function(t){var n=document.createElement("div");n.innerHTML=t.responseText,n.querySelectorAll(".post").length<100&&e.querySelector(".e-more-replies").hide();var o=e.querySelector(".more-replies-container"),i=o.querySelector("div");null===i?o.appendChild(n):o.insertBefore(n,i),r.default.initElement(n),e.classList.add("expanded")})},t}();e.default=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=o(n(1)),r=o(n(0)),a=o(n(2)),l=function(){function t(){i(this,t);var e=this;this.threadId=!1,this.nextLoadDelay=2e3,this.newReplies=0,this.lastUpdateNewReplies=0,this.runCount=0,this.nowLoading=!1,this.isActive=!1,this.nextRunTimeout=0,this.startDelayTimeout=0,this.originalDocTitle=document.title,document.querySelectorAll(".thread .e-get-replies").forEach(function(t){t.addEventListener("click",function(n){n.preventDefault(),e.runOnce(t.closest(".thread").dataset.id)})})}return t.prototype.run=function(t){if(this.nowLoading)return!1;this.nextLoadDelay=this.nextLoadDelay*(0===this.runCount?1:this.runCount),this.nextLoadDelay>3e4&&(this.nextLoadDelay=3e4),this.runCount>40&&this.stop(),t&&(this.runCount=0,this.isActive&&this.restart());var e=s.default.Thread.getElm(this.threadId),n=e.querySelectorAll(".reply"),o=0;0!==n.length&&(o=(o=n[n.length-1]).getAttribute("id").replace("post-",""));var i=[];n.forEach(function(t){i.push(t.dataset.id)}),this.nowLoading=!0;var l=this;r.default.post("/api/thread/getreplies",{threadId:this.threadId,fromId:o,newest:!0,xhr:function(t){return t.responseType="document",t},visibleReplies:i}).onLoad(function(n){var o=n.getResponseHeader("X-Deleted-Replies");if(null!==o&&o.split(",").forEach(function(t){var e=document.getElementById("post-"+t);null!==e&&e.remove()}),0===n.responseText.length)return void(t&&a.default.info(messages.noNewReplies));var i=document.createElement("div");i.classList.add("ajax"),i.innerHTML=n.responseText,l.lastUpdateNewReplies=i.querySelectorAll(".post").length,l.newReplies+=l.lastUpdateNewReplies,0===l.lastUpdateNewReplies?++l.runCount:l.runCount=0,i.querySelectorAll(".ref").forEach(function(t){var e=t.dataset.id,n=document.getElementById("post-"+e);if(null===n)return!0;var o=n.querySelector(".post-replies");null===o&&((o=document.createElement("div")).classList.add("post-replies"),o.innerHTML=messages.replies+":",n.appendChild(o));var i=t.cloneNode(!0);i.innerHTML=i.innerHTML.replace(" ("+messages.op+")",""),s.default.addTooltipEventListener(i),o.appendChild(document.createTextNode(" ")),o.appendChild(i)}),s.default.initElement(i),requestAnimationFrame(function(){e.querySelector(".replies").appendChild(i)}),t||(l.nextRunTimeout=setTimeout(function(){l.start()},l.nextLoadDelay))}).onError(function(t){if(410===t.status){var e=document.getElementById("thread-"+l.threadId);null!==e&&e.remove()}l.stop()}).onEnd(function(){l.nowLoading=!1,!document.hasFocus()&&l.newReplies>0&&document.body.classList.contains("thread-page")?document.title="("+l.newReplies+") "+l.originalDocTitle:0!==l.newReplies&&(l.newReplies=0)})},t.prototype.runOnce=function(t){this.threadId=t,this.run(!0)},t.prototype.start=function(){this.isActive=!0,this.startDelayTimeout&&clearTimeout(this.startDelayTimeout);var t=this;return this.threadId=$(".thread:first").data("id"),this.startDelayTimeout=setTimeout(function(){t.run(!1)},1e3),!0},t.prototype.stop=function(){return!this.isActive||(this.startDelayTimeout&&clearTimeout(this.startDelayTimeout),this.isActive=!1,this.reset(),!0)},t.prototype.restart=function(){this.stop(),this.start()},t.prototype.reset=function(){this.nowLoading=!1,this.newReplies=0,this.runCount=0,document.title!==this.originalDocTitle&&(document.title=this.originalDocTitle),this.nextRunTimeout&&clearTimeout(this.nextRunTimeout)},t}();e.default=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),s=function(){function t(){o(this,t);var e=this;document.querySelectorAll(".e-thread-follow").forEach(function(t){t.addEventListener("click",e.toggle)}),document.querySelectorAll(".e-follow-mark-read").forEach(function(t){t.addEventListener("click",e.markAllRead)}),document.querySelectorAll(".thread .e-mark-read").forEach(function(t){t.addEventListener("click",e.markRead)})}return t.prototype.markRead=function(t){var e=t.target.closest(".thread").dataset.id;t.target.hide(),document.querySelectorAll(".icon-bookmark .unread-count").forEach(function(t){var e=parseInt(t.innerHTML)-1;e<=0?t.hide():t.innerHTML=e}),i.default.post("/api/user/thread/follow/markread",{threadId:e}).onError(function(){t.target.show(),document.querySelectorAll(".icon-bookmark .unread-count").forEach(function(t){var e=parseInt(t.innerHTML)+1;1===e?t.show():t.innerHTML=e})})},t.prototype.markAllRead=function(){document.querySelectorAll(".icon-bookmark .unread-count").forEach(function(t){t.hide()}),document.querySelectorAll("h3 .notification-count").forEach(function(t){t.hide()}),i.default.post("/api/user/thread/follow/markallread").onError(function(){document.querySelectorAll(".icon-bookmark .unread-count").forEach(function(t){t.show()}),document.querySelectorAll("h3 .notification-count").forEach(function(t){t.show()})})},t.prototype.toggle=function(t){function e(t){t.classList.contains("act")?(t.classList.add("icon-bookmark-add"),t.classList.remove("icon-bookmark-remove","act")):(t.classList.add("icon-bookmark-remove","act"),t.classList.remove("icon-bookmark-add"))}var n=t.target.closest(".thread"),o=t.currentTarget,s=!0;t.currentTarget.classList.contains("act")&&(s=!1),n.classList.toggle("followed"),e(o),i.default.post(s?"/api/user/thread/follow/create":"/api/user/thread/follow/delete",{threadId:n.dataset.id}).onError(function(t){n.classList.toggle("followed"),e(o)})},t}();e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),s=function(){function t(){o(this,t);var e=this;document.querySelectorAll(".e-thread-hide").forEach(function(t){t.addEventListener("click",e.toggle)})}return t.prototype.toggle=function(t){function e(t){t.classList.contains("act")?(t.classList.add("icon-eye-crossed"),t.classList.remove("icon-eye","act")):(t.classList.add("icon-eye","act"),t.classList.remove("icon-eye-crossed"))}var n=t.target.closest(".thread"),o=t.currentTarget,s=!0;t.currentTarget.classList.contains("act")&&(s=!1),n.classList.toggle("hidden"),e(o),i.default.post(s?"/api/user/thread/hide/create":"/api/user/thread/hide/delete",{threadId:n.dataset.id}).onError(function(t){n.classList.toggle("hidden"),e(o)})},t}();e.default=s}]);